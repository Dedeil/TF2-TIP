VertexLitGeneric
{
	$basetexture "models/player/scout/scout_blue"
	$bumpmap "water/tfwater001_normal"
	$surfaceprop Metal

	$lightwarptexture "models/player/pyro/pyro_lightwarp"

	$detail "effects/blue"

	$envmap "effects/cubemapper"

	$phong 1
	$phongfresnelranges "[11 1 8]"
	$halflambert 1
	$phongexponent 35
	$phongboost 0.1

	// Rim lighting parameters
	$rimlight 1				// To enable rim lighting (requires phong)
	$rimlightexponent 11	// Exponent for phong component of rim lighting	
	$rimlightboost 0.5		// Boost for ambient cube component of rim lighting

	$selfillum 1
	$selfillumfresnel 1
	$selfillumfresnelminmaxexp "[0 18 13]"	// 0.0 1.0 1.0 is the default

	$half 0.5
	$invulnexponent 1
	$invulnexponentfading 1
	$invulnexponentfull 13
	$invulnexponentoutput 1
	$invulnfmax 18
	$invulnfmaxfading -31
	$invulnfmaxfull 18
	$invulnfmaxoutput 1
	$invulnlevel 0
	$invulnphong 1
	$invulnphongfading 0
	$invulnphongfull 1
	$invulnphongoutput 1

	<dx90
	{
		$bumpmap "water/dx80_tfwater001_normal"
	}

	Proxies
	{
		AnimatedTexture
		{
			animatedtexturevar "$bumpmap"
			animatedtextureframenumvar "$bumpframe"
			animatedtextureframerate 70
		}

		InvulnLevel
		{
			resultVar "$invulnlevel"
		}

		LessOrEqual
		{
			srcVar1 "$invulnlevel"
			srcVar2 "$half"
			lessEqualVar "$invulnphongfading"
			greaterVar "$invulnphongfull"
			resultVar "$invulnphongoutput"
		}

		LessOrEqual
		{
			srcVar1 "$invulnlevel"
			srcVar2 "$half"
			lessEqualVar "$invulnfmaxfading"
			greaterVar "$invulnfmaxfull"
			resultVar "$invulnfmaxoutput"
		}

		LessOrEqual
		{
			srcVar1 "$invulnlevel"
			srcVar2 "$half"
			lessEqualVar "$invulnexponentfading"
			greaterVar "$invulnexponentfull"
			resultVar "$invulnexponentoutput"
		}

		Sine
		{
			resultVar "$invulnfmax"
			sineperiod .3
			sinemin "$invulnfmaxoutput"
			sinemax 18
		}

		Sine
		{
			resultVar "$invulnphong"
			sineperiod .3
			sinemin "$invulnphongoutput"
			sinemax 1
		}

		Sine
		{
			resultVar "$invulnexponent"
			sineperiod .3
			sinemin "$invulnexponentoutput"
			sinemax 13
		}

		Equals
		{
			srcVar1 "$invulnexponent"
			resultVar "$selfillumfresnelminmaxexp[2]"
		}

		Equals
		{
			srcVar1 "$invulnfmax"
			resultVar "$selfillumfresnelminmaxexp[1]"
		}

		Equals
		{
			srcVar1 "$invulnphong"
			resultVar "$phongboost"
		}
	}
}